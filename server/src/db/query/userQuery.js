// TODO move logic here -- refactor
